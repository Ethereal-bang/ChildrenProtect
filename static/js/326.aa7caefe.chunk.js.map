{"version":3,"file":"static/js/326.aa7caefe.chunk.js","mappings":"+OAEaA,EAAQ,SAACC,EAAkBC,GACpC,IAAMC,EAAO,IAAIC,SAGjB,OAFAD,EAAKE,OAAO,WAAYJ,GACxBE,EAAKE,OAAO,WAAYH,GACjBI,EAAAA,EAAAA,KAAa,eAAgBH,EACvC,EAGYI,EAAsB,SAACC,GAChC,IAAML,EAAO,IAAIC,SAEjB,OADAD,EAAKE,OAAO,QAASG,GACdF,EAAAA,EAAAA,KAAa,0BAA2BH,EAClD,EAGYM,EAAa,SAACD,EAAeE,GACtC,IAAMP,EAAO,IAAIC,SAGjB,OAFAD,EAAKE,OAAO,QAASG,GACrBL,EAAKE,OAAO,OAAQK,GACbJ,EAAAA,EAAAA,KAAa,2BAA4BH,EACnD,EAGYQ,EAAS,SAACC,EAAaJ,GAChC,IAAML,EAAO,IAAIC,SAGjB,OAFAD,EAAKE,OAAO,cAAeO,GAC3BT,EAAKE,OAAO,QAASG,GACdF,EAAAA,EAAAA,KAAa,iCAAkCH,EACzD,C,wFC3BYG,EAAUO,IAAAA,OAAa,CAChCC,QAAS,2BAETC,OAAQ,SAGZT,EAAQU,aAAaC,QAAQC,KAAI,SAACC,GAC1B,IAAMC,GAAQC,EAAAA,EAAAA,KAId,OAHID,GAASD,EAAOG,UAChBH,EAAOG,QAAQF,MAAQA,GAEpBD,CACV,IAAE,SAACI,GACA,OAAOC,QAAQC,OAAQF,EAC1B,G,kJCRU,SAASG,IACtB,OAA4BC,EAAAA,EAAAA,WAAkB,GAA9C,eAAKC,EAAL,KAAcC,EAAd,KACA,GAA8BF,EAAAA,EAAAA,UAAiB,IAA/C,eAAK1B,EAAL,KAAe6B,EAAf,KACA,GAA8BH,EAAAA,EAAAA,UAAiB,IAA/C,eAAKzB,EAAL,KAAe6B,EAAf,KACIC,GAAWC,EAAAA,EAAAA,MAkBf,OACE,gBAAKC,UAAU,cAAf,UACE,iBAAKA,UAAU,WAAf,WACE,gBAAKA,UAAU,QAAf,uCAGA,iBAAKA,UAAU,MAAf,WACE,gBAAKA,UAAU,OAAf,uCACA,gBAAKA,UAAU,QAAf,UACE,kBACEC,KAAK,OACLC,YAAY,iCACZC,MAAOpC,EACPqC,SAAU,SAACC,GAAKT,EAAYS,EAAEC,OAAOH,MAAO,OAGhD,gBAAKH,UAAU,OAAf,uCACA,gBAAKA,UAAU,WAAf,UACE,kBACEC,KAAK,WACLM,MAAO,CAAE,YAAgBb,EAA+B,GAArB,mBAAwB,MAASA,EAA2B,GAAnB,oBAC5EQ,YAAY,eACZC,MAAOnC,EACPoC,SAAU,SAACC,GAAKR,EAAYQ,EAAEC,OAAOH,MAAO,OAGhD,iBAAKH,UAAU,OAAf,UAEKN,GAEG,oBADF,gBAAKM,UAAU,OAAf,2EAIJ,gBAAKA,UAAU,QAAQQ,QAAS,WAAKV,EAAS,WAAY,EAA1D,mDAIJ,gBAAKE,UAAU,WAAf,UACE,mBAAQQ,QAvDJ,YAEVC,EAAAA,EAAAA,IAAS1C,EAAUC,GAAU0C,MAAK,SAAAC,GChBvB,IAAeC,EDwBxB,OAPAjB,GAAW,GEjBF,SAAkB5B,GAC7B8C,eAAeC,QAAQ,QAAQ/C,EAClC,CFgBKgD,CAASJ,EAAI1C,KAAKA,KAAKiB,OClBC0B,EDmBlBD,EAAI1C,KAAKA,KAAK2C,GClBtBI,aAAaF,QAAQ,KAAMF,GEChB,SAAU7C,GACrBiD,aAAaF,QAAQ,WAAY/C,EACpC,CHgBKkD,CAASlD,GACTmD,YAAW,WACTpB,EAAS,aACV,GAAE,GACIqB,EAAA,WAAgBR,EAAI1C,KAAKkD,QACjC,IAAEC,OAAM,SAAA/B,GAEP,OADAM,GAAW,GACJwB,EAAA,SAAc9B,EAAIgC,SAASpD,KAAKkD,QACxC,GACF,EAwCO,gCAKT,C","sources":["api/loginApi.ts","api/myAxios.ts","pages/login/Login.tsx","utils/setId.ts","utils/setToken.ts","utils/setPhone.ts"],"sourcesContent":["import {myAxios} from \"./myAxios\";\r\n\r\nexport const login = (username: string, password: string) => {\r\n    const data = new FormData();\r\n    data.append(\"username\", username);\r\n    data.append(\"password\", password);\r\n    return myAxios.post(\"/admin/login\", data);\r\n}\r\n\r\n// 找回密码-获取验证码\r\nexport const getVerificationCode = (phone: string) => {\r\n    const data = new FormData();\r\n    data.append(\"phone\", phone);\r\n    return myAxios.post(\"/admin/password/getCode\", data);\r\n}\r\n\r\n// 找回密码-验证码是否匹配\r\nexport const verifyCode = (phone: string, code: string) => {\r\n    const data = new FormData();\r\n    data.append(\"phone\", phone);\r\n    data.append(\"code\", code);\r\n    return myAxios.post(\"/admin/password/sendCode\", data);\r\n}\r\n\r\n// 重置密码\r\nexport const setPwd = (pwd: string, phone: string) => {\r\n    const data = new FormData();\r\n    data.append(\"newPassword\", pwd);\r\n    data.append(\"phone\", phone);\r\n    return myAxios.post(\"/admin/password/setNewPassword\", data);\r\n}","import axios from \"axios\";\r\nimport getToken from \"../utils/getToken\";\r\n\r\nexport const myAxios = axios.create({\r\n    baseURL: \"http://124.223.99.4:8080\",\r\n    // timeout: 2000,\r\n    method: \"POST\",  // 默认POST\r\n})\r\n\r\nmyAxios.interceptors.request.use((config) => {\r\n        const token = getToken();\r\n        if (token && config.headers) {\r\n            config.headers.token = token;\r\n        }\r\n        return config;\r\n    }, (err) => {\r\n        return Promise.reject((err));\r\n    }\r\n)","import React, { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport setToken from '../../utils/setToken'\r\nimport './Login.css'\r\nimport {login as loginApi} from \"../../api/loginApi\";\r\nimport {message} from \"antd\";\r\nimport setId from \"../../utils/setId\";\r\nimport setPhone from \"../../utils/setPhone\";\r\n\r\nexport default function Login() {\r\n  let [isRight, setIsRight] = useState<boolean>(true)\r\n  let [username, setUsername] = useState<string>('')\r\n  let [password, setPassword] = useState<string>('')\r\n  let navigate = useNavigate()\r\n  let Login = () => {\r\n    // 登录逻辑\r\n    loginApi(username, password).then(res => {\r\n      setIsRight(true)\r\n      setToken(res.data.data.token);\r\n      setId(res.data.data.id);\r\n      setPhone(username);\r\n      setTimeout(() => {\r\n        navigate('/home/data')\r\n      }, 0);\r\n      return message.success(res.data.message);\r\n    }).catch(err => {\r\n      setIsRight(false)\r\n      return message.error(err.response.data.message);\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='login-outer'>\r\n      <div className=\"loginBox\">\r\n        <div className=\"title\">\r\n          欢迎登录\r\n        </div>\r\n        <div className=\"mid\">\r\n          <div className=\"user\">用户名称</div>\r\n          <div className='input'>\r\n            <input\r\n              type=\"text\"\r\n              placeholder='输入用户名' \r\n              value={username}\r\n              onChange={(e)=>{setUsername(e.target.value)}}\r\n            />\r\n          </div>\r\n          <div className=\"pass\">用户密码</div>\r\n          <div className='password'>\r\n            <input \r\n              type=\"password\" \r\n              style={{ \"borderColor\": !isRight ? 'rgb(216, 26, 26)' : '',\"color\":!isRight?\"rgb(216, 26, 26)\":\"\"}} \r\n              placeholder='密码' \r\n              value={password}\r\n              onChange={(e)=>{setPassword(e.target.value)}}\r\n            />\r\n          </div>\r\n          <div className=\"tips\">\r\n            {\r\n              !isRight ?\r\n                <div className=\"left\">用户密码错误重新输入</div>\r\n                : <div />\r\n            }\r\n\r\n            <div className=\"right\" onClick={()=>{navigate('/getback')}}>忘记密码？</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"loginBtn\">\r\n          <button onClick={Login}>登录</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","export default function setId(id: string){\r\n    localStorage.setItem('id', id);\r\n}","export default function setToken(username:string){\r\n    sessionStorage.setItem('token',username)\r\n}","// 设置账户名/电话\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default function (username: string): void {\r\n    localStorage.setItem(\"username\", username);\r\n}"],"names":["login","username","password","data","FormData","append","myAxios","getVerificationCode","phone","verifyCode","code","setPwd","pwd","axios","baseURL","method","interceptors","request","use","config","token","getToken","headers","err","Promise","reject","Login","useState","isRight","setIsRight","setUsername","setPassword","navigate","useNavigate","className","type","placeholder","value","onChange","e","target","style","onClick","loginApi","then","res","id","sessionStorage","setItem","setToken","localStorage","setPhone","setTimeout","message","catch","response"],"sourceRoot":""}