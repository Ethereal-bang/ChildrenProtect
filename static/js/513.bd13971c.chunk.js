"use strict";(self.webpackChunkchildren_protect=self.webpackChunkchildren_protect||[]).push([[513],{3513:function(e,r,n){n.r(r),n.d(r,{default:function(){return p}});n(7606);var t=n(478),a=(n(2845),n(7309)),o=(n(1565),n(7031)),s=(n(7204),n(3695)),i=n(3433),d=(n(3116),n(1541)),l=n(9439),c=n(2791);function u(){return localStorage.getItem("id")}var f=n(3363);var h=n(184);function p(){var e=(0,c.useState)(new Array(2).fill(!1)),r=(0,l.Z)(e,2),n=r[0],p=r[1],m=d.Z.useForm(),Z=(0,l.Z)(m,1)[0],x=d.Z.useForm(),P=(0,l.Z)(x,1)[0];function w(e){p((function(r){var n=(0,i.Z)(r);return n[e]=!0,n}))}var j=function(e){var r=u();if(!r)return s.ZP.error("\u7f3a\u5c11Id\u5b57\u6bb5");(function(e,r){var n=new FormData;return n.append("id",e),n.append("newPhone",r),f.G.post("/admin/getCode",n)})(r,e).then((function(e){return s.ZP.success(e.data.message)}),(function(e){return s.ZP.error(e.response.data.message)}))};function v(e){var r=u();if(!r)return s.ZP.error("\u7f3a\u5c11Id\u5b57\u6bb5");e?Z.validateFields().then((function(e){if(!e.code)return s.ZP.warn("\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801");(function(e,r,n){var t=new FormData;return t.append("id",e),t.append("newPhone",r),t.append("code",n),f.G.post("/admin/modifyPhone",t)})(r,e.newPhone,e.code).then((function(e){return s.ZP.success(e.data.message)}),(function(e){return s.ZP.error(e.response.data.message)})),Z.resetFields()}),(function(e){return s.ZP.error("Validate Failed: ",e)})):P.validateFields().then((function(e){var n=e.oldPassword,t=e.newPassword;if(!n||!t)return s.ZP.error("\u8bf7\u586b\u5199\u5b8c\u6574");(function(e,r,n){var t=new FormData;return t.append("id",e),t.append("oldPassword",r),t.append("newPassword",n),f.G.post("/admin/modifyPassword",t)})(r,n,t).then((function(e){return s.ZP.success(e.data.message)}),(function(e){return s.ZP.error(e.response.data.message)})),Z.resetFields()}),(function(e){return s.ZP.error("Validate Failed: ",e)})),p([!1,!1])}return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{className:"form-outer",children:[(0,h.jsxs)("label",{children:[(0,h.jsx)("div",{className:"title",children:"\u7ba1\u7406\u5458\u8d26\u6237\u540d"}),(0,h.jsx)("input",{type:"text",placeholder:localStorage.getItem("username")||"\u663e\u793a\u9519\u8bef"}),"    ",(0,h.jsx)("button",{type:"button",onClick:function(){return w(0)},children:"\u4fee\u6539\u8d26\u6237\u540d"})]}),(0,h.jsxs)("label",{children:[(0,h.jsx)("div",{className:"title",children:"\u7ba1\u7406\u5458\u8d26\u6237\u5bc6\u7801"}),(0,h.jsx)("input",{type:"password",placeholder:"*******"}),"    ",(0,h.jsx)("button",{type:"button",onClick:function(){return w(1)},children:"\u4fee\u6539\u5bc6\u7801"})]})]}),(0,h.jsx)(t.Z,{centered:!0,title:"\u4fee\u6539\u8d26\u53f7",visible:n[0],onOk:function(){return v(!0)},okText:"\u63d0\u4ea4",onCancel:function(){return p([!1,!1])},cancelText:"\u53d6\u6d88",children:(0,h.jsxs)(d.Z,{form:Z,children:[(0,h.jsx)(d.Z.Item,{name:"newPhone",label:"\u8d26\u53f7",required:!0,children:(0,h.jsx)(o.Z,{placeholder:"\u8bf7\u8f93\u5165\u65b0\u624b\u673a\u53f7"})}),(0,h.jsx)(d.Z.Item,{name:"code",label:"\u9a8c\u8bc1\u7801",required:!0,children:(0,h.jsx)(o.Z,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",style:{width:250}})}),(0,h.jsx)(d.Z.Item,{children:(0,h.jsx)(a.Z,{htmlType:"button",type:"primary",onClick:function(){return j(Z.getFieldValue("newPhone"))},children:"\u83b7\u53d6\u9a8c\u8bc1\u7801"})})]})}),(0,h.jsx)(t.Z,{centered:!0,title:"\u4fee\u6539\u5bc6\u7801",visible:n[1],onOk:function(){return v(!1)},okText:"\u63d0\u4ea4",onCancel:function(){return p([!1,!1])},cancelText:"\u53d6\u6d88",children:(0,h.jsxs)(d.Z,{form:P,children:[(0,h.jsx)(d.Z.Item,{name:"oldPassword",label:"\u539f\u5bc6\u7801",required:!0,children:(0,h.jsx)(o.Z.Password,{placeholder:"\u8bf7\u8f93\u5165"})}),(0,h.jsx)(d.Z.Item,{name:"newPassword",label:"\u65b0\u5bc6\u7801",required:!0,children:(0,h.jsx)(o.Z.Password,{placeholder:"\u8bf7\u8f93\u5165"})}),(0,h.jsx)(d.Z.Item,{name:"confirm",label:"\u786e\u8ba4\u65b0\u5bc6\u7801",required:!0,rules:[{required:!0},function(e){var r=e.getFieldValue;return{validator:function(e,n){return n&&r("newPassword")!==n?Promise.reject(new Error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u5339\u914d")):Promise.resolve()}}}],children:(0,h.jsx)(o.Z.Password,{placeholder:"\u8bf7\u8f93\u5165"})})]})})]})}}}]);
//# sourceMappingURL=513.bd13971c.chunk.js.map